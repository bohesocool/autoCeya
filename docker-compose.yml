services:
  autoceya:
    # 使用Docker Hub镜像（推荐）
    image: bohesocool/autoceya:latest
    
    # 或者本地构建（开发用）
    # build: .
    
    container_name: autoceya
    
    # 以root用户运行，避免权限问题
    user: "0:0"
    
    ports:
      - "8998:8998"
    environment:
      - PORT=8998
      - AUTH_SECRET=${AUTH_SECRET:-your_secure_password_here}
      - DEFAULT_SUCCESS_THRESHOLD=${DEFAULT_SUCCESS_THRESHOLD:-75}
      - DEFAULT_MAX_FAILURES=${DEFAULT_MAX_FAILURES:-20}
      - DEFAULT_RESPONSE_TIME_THRESHOLD=${DEFAULT_RESPONSE_TIME_THRESHOLD:-150000}
    restart: unless-stopped
    volumes:
      # 持久化数据库文件和日志
      - ./data:/app/data
      - ./logs:/app/logs

