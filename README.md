# AutoCeya - å¤šæ¨¡å‹AIå‹åŠ›æµ‹è¯•ç³»ç»Ÿ

ğŸš€ ä¸“ä¸šçš„ AI æ¨¡å‹å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œæ”¯æŒ **Geminiã€OpenAIã€Claude** å¤šç§æ¨¡å‹çš„ RPM æ‰¿å—èƒ½åŠ›å’Œç¨³å®šæ€§æµ‹è¯•ã€‚

> **ğŸ‰ v2.0 é‡å¤§æ›´æ–°**ï¼šå…¨æ–°æ¶æ„ã€å¤šæ¨¡å‹æ”¯æŒã€å¢å¼ºå®‰å…¨æ€§ï¼
> 
> ğŸ“– [æŸ¥çœ‹ v2.0 è¯¦ç»†æ–‡æ¡£](./README-v2.md) | ğŸ”„ [è¿ç§»æŒ‡å—](./MIGRATION.md) | ğŸ“‹ [æ›´æ–°æ—¥å¿—](./CHANGELOG.md)

## âœ¨ v2.0 æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ å¤šAIæ¨¡å‹æ”¯æŒï¼ˆæ–°å¢ï¼‰
- âœ… **Gemini** - Google Gemini ç³»åˆ—æ¨¡å‹
- âœ… **OpenAI** - GPT-3.5ã€GPT-4 ç­‰æ¨¡å‹
- âœ… **Claude** - Anthropic Claude ç³»åˆ—æ¨¡å‹
- âœ… **ç»Ÿä¸€æ¥å£** - ç®€å•åˆ‡æ¢ä¸åŒAIæä¾›å•†

### ğŸ—ï¸ æ¶æ„å‡çº§ï¼ˆæ–°å¢ï¼‰
- âœ… **æ¨¡å—åŒ–è®¾è®¡** - æ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼ˆMVCï¼‰
- âœ… **ä¸“ä¸šæ—¥å¿—ç³»ç»Ÿ** - Winston ç»“æ„åŒ–æ—¥å¿—
- âœ… **API æ–‡æ¡£** - Swagger/OpenAPI 3.0
- âœ… **ç»Ÿä¸€é”™è¯¯å¤„ç†** - å®Œå–„çš„é”™è¯¯æ•è·æœºåˆ¶

### ğŸ”’ å®‰å…¨å¢å¼ºï¼ˆæ–°å¢ï¼‰
- âœ… **CORS å®‰å…¨ç­–ç•¥** - å¯é…ç½®çš„è·¨åŸŸæ§åˆ¶
- âœ… **è¯·æ±‚é¢‘ç‡é™åˆ¶** - é˜²æ­¢ API æ»¥ç”¨
- âœ… **å‚æ•°éªŒè¯** - ä¸¥æ ¼çš„è¾“å…¥éªŒè¯
- âœ… **érootè¿è¡Œ** - Docker å®¹å™¨å®‰å…¨åŠ å›º

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **åŒæ¨¡å¼æµ‹å‹**
  - ğŸ¯ **å›ºå®šæµ‹å‹æ¨¡å¼**: è®¾å®šå›ºå®šRPMæŒç»­æµ‹è¯•ï¼Œæ”¯æŒè®¾ç½®æµ‹è¯•æ—¶é•¿
  - ğŸ“ˆ **è‡ªåŠ¨æµ‹å‹æ¨¡å¼**: ä»èµ·å§‹RPMé€æ­¥é€’å¢ï¼Œè‡ªåŠ¨æ‰¾å‡ºæ‰¿å—æé™
  
- ğŸ² **æ™ºèƒ½æµ‹è¯•è¯­å¥æ¨¡å¼**
  - ğŸ“ **å›ºå®šè¯­å¥æ¨¡å¼**: ä½¿ç”¨ç›¸åŒçš„æµ‹è¯•è¯­å¥
  - ğŸ² **éšæœºè¯­å¥æ¨¡å¼**: è‡ªåŠ¨éšæœºå˜åŒ–æµ‹è¯•è¯­å¥ï¼Œé¿å…é£æ§æ£€æµ‹
  - æ”¯æŒè¶…å¤§æ–‡æœ¬è¾“å…¥ï¼ˆæœ€å¤š200,000å­—ç¬¦ï¼‰ï¼Œé€‚åˆé•¿ä¸Šä¸‹æ–‡æµ‹è¯•
  
- ğŸ’¾ **é…ç½®è®°å¿†åŠŸèƒ½**ï¼ˆæ–°åŠŸèƒ½ï¼ï¼‰
  - âš¡ **è‡ªåŠ¨ä¿å­˜é…ç½®**: å¯åŠ¨æµ‹è¯•æ—¶è‡ªåŠ¨ä¿å­˜æ‰€æœ‰é…ç½®ä¿¡æ¯
  - ğŸ”„ **è‡ªåŠ¨åŠ è½½é…ç½®**: é‡æ–°æ‰“å¼€é¡µé¢æ—¶è‡ªåŠ¨æ¢å¤ä¸Šæ¬¡çš„é…ç½®
  - ğŸ“ **ä¿å­˜çš„é…ç½®åŒ…æ‹¬**: URLã€æ¨¡å‹åã€APIå¯†é’¥ã€æµ‹è¯•è¯­å¥ã€RPMè®¾ç½®ç­‰
  - ğŸ’» **æœ¬åœ°å­˜å‚¨**: é…ç½®ä¿å­˜åœ¨æµè§ˆå™¨localStorageä¸­ï¼Œæ— éœ€æœåŠ¡å™¨å­˜å‚¨

- ğŸ”„ **åå°æŒç»­è¿è¡Œ**ï¼ˆæ–°åŠŸèƒ½ï¼ï¼‰
  - ğŸŒ **æœåŠ¡å™¨ç«¯æµ‹å‹**: æµ‹å‹ä»»åŠ¡åœ¨æœåŠ¡å™¨åå°è¿è¡Œ
  - ğŸšª **å…³é—­é¡µé¢ä¸å½±å“**: å³ä½¿å…³é—­æµè§ˆå™¨ï¼Œæµ‹å‹ä»»åŠ¡ç»§ç»­æ‰§è¡Œ
  - ğŸ“Š **çŠ¶æ€å®æ—¶åŒæ­¥**: é‡æ–°æ‰“å¼€é¡µé¢ç«‹å³çœ‹åˆ°å½“å‰æµ‹è¯•çŠ¶æ€
  - ğŸ”Œ **WebSocketè‡ªåŠ¨é‡è¿**: æ–­çº¿åè‡ªåŠ¨é‡æ–°è¿æ¥å¹¶æ¢å¤æ•°æ®æ˜¾ç¤º
  
- ğŸ“Š **å¢å¼ºçš„æ•°æ®å¯è§†åŒ–**ï¼ˆæ–°åŠŸèƒ½ï¼ï¼‰
  - ğŸ“ˆ **å®Œæ•´å†å²æ•°æ®**: æ›²çº¿å›¾æ˜¾ç¤ºå…¨éƒ¨æµ‹è¯•å†å²ï¼ˆæœ€å¤š24å°æ—¶ï¼‰
  - ğŸ¯ **æ™ºèƒ½Xè½´ç¼©æ”¾**: è‡ªåŠ¨è°ƒæ•´æ—¶é—´è½´å¯†åº¦ï¼Œé€‚åº”ä¸åŒæµ‹è¯•æ—¶é•¿
  - ğŸ–±ï¸ **äº¤äº’å¼å›¾è¡¨**: æ”¯æŒæ‚¬åœæŸ¥çœ‹è¯¦ç»†æ•°æ®ç‚¹ä¿¡æ¯
  - ğŸ“‰ **å®æ—¶æ›´æ–°**: æ¯åˆ†é’Ÿè‡ªåŠ¨è®°å½•å¹¶æ›´æ–°ç»Ÿè®¡æ›²çº¿
  - ğŸ” **è¯¦ç»†è¯·æ±‚æ—¥å¿—**: æ¯ä¸ªè¯·æ±‚çš„å®Œæ•´è®°å½•ï¼Œæ”¯æŒçŠ¶æ€ç­›é€‰
  
- ğŸ“š **å†å²è®°å½•ç®¡ç†**ï¼ˆæ–°åŠŸèƒ½ï¼ï¼‰
  - ğŸ’¾ **è‡ªåŠ¨ä¿å­˜**: æ¯æ¬¡æµ‹è¯•ç»“æŸåè‡ªåŠ¨ä¿å­˜å®Œæ•´è®°å½•
  - ğŸ“Š **è¯¦ç»†ç»Ÿè®¡**: è®°å½•æ‰€æœ‰æµ‹è¯•æ•°æ®å’Œæ›²çº¿å›¾
  - ğŸ” **å†å²æŸ¥çœ‹**: æµè§ˆæ‰€æœ‰å†å²æµ‹è¯•è®°å½•
  - ğŸ“ˆ **è¶‹åŠ¿åˆ†æ**: æŸ¥çœ‹æ¯æ¡è®°å½•çš„è¯¦ç»†æ•°æ®å’Œå›¾è¡¨
  - ğŸ—„ï¸ **SQLiteå­˜å‚¨**: ä½¿ç”¨SQLiteæœ¬åœ°æ•°æ®åº“æŒä¹…åŒ–å­˜å‚¨

- ğŸ”’ **å®‰å…¨è®¤è¯**
  - å¯†é’¥ç™»å½•ä¿æŠ¤
  - Tokenè®¤è¯æœºåˆ¶
  - é˜²æ­¢æœªæˆæƒè®¿é—®

- ğŸ¨ **ç°ä»£åŒ–ç•Œé¢**
  - å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯
  - å®æ—¶WebSocketæ•°æ®æ¨é€
  - ç¾è§‚çš„æ¸å˜è‰²UI
  - Chart.jsé©±åŠ¨çš„ä¸“ä¸šå›¾è¡¨å±•ç¤º

### æ™ºèƒ½åˆ¤å®šç³»ç»Ÿ

ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ¤å®šAPIæ‰¿å—èƒ½åŠ›æé™ï¼Œåˆ¤å®šæ¡ä»¶ï¼š
1. âœ… **æˆåŠŸç‡é˜ˆå€¼**: 
   - **è‡ªåŠ¨æ¨¡å¼**: åŸºäºæœ¬åˆ†é’ŸæˆåŠŸç‡ä½äº80%ï¼ˆå¯é…ç½®ï¼‰
   - **å›ºå®šæ¨¡å¼**: åŸºäºæ€»ä½“æˆåŠŸç‡ä½äº80%ï¼ˆå¯é…ç½®ï¼‰
2. âš ï¸ **è¿ç»­å¤±è´¥**: è¿ç»­å¤±è´¥10æ¬¡ä»¥ä¸Šï¼ˆå¯é…ç½®ï¼‰
3. â±ï¸ **å“åº”è¶…æ—¶**: å¹³å‡å“åº”æ—¶é—´è¶…è¿‡150ç§’ï¼ˆå¯é…ç½®ï¼Œé€‚åˆæ€è€ƒæ¨¡å‹ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç‰ˆæœ¬é€‰æ‹©

| ç‰ˆæœ¬ | è¯´æ˜ | æ¨èç”¨é€” |
|------|------|---------|
| **v2.0** | å¤šæ¨¡å‹æ”¯æŒã€æ¶æ„é‡æ„ã€å¢å¼ºå®‰å…¨ | ğŸŒŸ ç”Ÿäº§ç¯å¢ƒï¼ˆæ¨èï¼‰ |
| v1.x | ä»…æ”¯æŒ Gemini | è½»é‡çº§éƒ¨ç½² |

### ğŸ“¦ å®‰è£…éƒ¨ç½²ï¼ˆv2.0ï¼‰

### ç¯å¢ƒè¦æ±‚
- Node.js 14.x æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆæ™®é€šéƒ¨ç½²ï¼‰
- Docker å’Œ Docker Composeï¼ˆDockeréƒ¨ç½²ï¼Œæ¨èï¼‰

### æ–¹å¼ä¸€ï¼šDockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

**æœ€ç®€å•å¿«é€Ÿçš„éƒ¨ç½²æ–¹å¼ï¼**

#### ä½¿ç”¨Docker Hubé•œåƒï¼ˆæœ€å¿«æ·ï¼‰

**æ–¹æ³•1ï¼šä½¿ç”¨docker runå‘½ä»¤ï¼ˆæœ€ç®€å•ï¼‰**

```bash
docker run -d \
  -p 8998:8998 \
  -e AUTH_SECRET=your_password \
  -v $(pwd)/data:/app/data \
  -v $(pwd)/logs:/app/logs \
  --name autoceya \
  bohesocool/autoceya:latest
```

> ğŸ’¡ **v2.0 æ–°å¢**ï¼šæŒ‚è½½ logs ç›®å½•å¯æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

**æ–¹æ³•2ï¼šä½¿ç”¨docker-composeï¼ˆæ¨èï¼‰**

```bash
# 1. åˆ›å»ºdocker-compose.ymlæ–‡ä»¶
cat > docker-compose.yml << 'EOF'
version: '3.8'
services:
  autoceya:
    image: bohesocool/autoceya:latest
    container_name: autoceya
    ports:
      - "8998:8998"
    environment:
      - AUTH_SECRET=your_secure_password_here
    restart: unless-stopped
EOF

# 2. å¯åŠ¨å®¹å™¨
docker-compose up -d

# 3. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# 4. åœæ­¢æœåŠ¡
docker-compose down
```

#### æˆ–è€…å…‹éš†é¡¹ç›®æœ¬åœ°æ„å»º

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/bohesocool/autoCeya.git
cd autoCeya
```

2. **è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰**

åˆ›å»º `.env` æ–‡ä»¶æˆ–ç›´æ¥ä¿®æ”¹ `docker-compose.yml`ï¼š
```env
AUTH_SECRET=your_secure_password_here
```

3. **å¯åŠ¨å®¹å™¨**
```bash
# æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

4. **è®¿é—®ç³»ç»Ÿ**

æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://localhost:8998`

#### ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬

```yaml
# ç”Ÿäº§ç¯å¢ƒæ¨èä½¿ç”¨å›ºå®šç‰ˆæœ¬å·
services:
  autoceya:
    image: bohesocool/autoceya:1.0.0  # ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬
```

**æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ç‰ˆæœ¬ï¼š** https://hub.docker.com/r/bohesocool/autoceya/tags

### æ–¹å¼äºŒï¼šæ™®é€šéƒ¨ç½²ï¼ˆv2.0ï¼‰

1. **å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®**
```bash
git clone https://github.com/bohesocool/autoCeya.git
cd autoCeya
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **é…ç½®ç¯å¢ƒå˜é‡**

å¤åˆ¶ `.env.example` æ–‡ä»¶ä¸º `.env`ï¼š
```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œè®¾ç½®ä½ çš„è®¿é—®å¯†é’¥ï¼š
```env
# ç³»ç»Ÿç™»å½•å¯†é’¥ï¼ˆè¯·åŠ¡å¿…ä¿®æ”¹ï¼ï¼‰
AUTH_SECRET=your_secure_password_here

# æœåŠ¡å™¨ç«¯å£
PORT=8998

# æµ‹å‹é…ç½®
DEFAULT_SUCCESS_THRESHOLD=80
DEFAULT_MAX_FAILURES=10
DEFAULT_RESPONSE_TIME_THRESHOLD=150000
```

4. **å¯åŠ¨æœåŠ¡å™¨**
```bash
# v2.0 æ–°ç‰ˆï¼ˆæ¨èï¼‰
npm start

# v1.x æ—§ç‰ˆï¼ˆå…¼å®¹ï¼‰
npm run start:old

# å¼€å‘æ¨¡å¼ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰
npm run dev
```

5. **è®¿é—®ç³»ç»Ÿ**

æ‰“å¼€æµè§ˆå™¨è®¿é—®: 
- ä¸»é¡µ: `http://localhost:8998`
- APIæ–‡æ¡£: `http://localhost:8998/api-docs` â­ **v2.0æ–°å¢**
- å¥åº·æ£€æŸ¥: `http://localhost:8998/health` â­ **v2.0æ–°å¢**

ä½¿ç”¨ä½ åœ¨ `.env` ä¸­è®¾ç½®çš„ `AUTH_SECRET` ç™»å½•

## ğŸ¯ ä½¿ç”¨æŒ‡å—ï¼ˆv2.0ï¼‰

### 1. ç™»å½•ç³»ç»Ÿ
- ä½¿ç”¨é…ç½®çš„å¯†é’¥ç™»å½•ç³»ç»Ÿ
- ç™»å½•åä¼šè‡ªåŠ¨è·³è½¬åˆ°æµ‹å‹æ§åˆ¶å°
- å¦‚æœä¹‹å‰ä¿å­˜è¿‡é…ç½®ï¼Œä¼šè‡ªåŠ¨åŠ è½½

### 2. é…ç½®æµ‹è¯•å‚æ•°

#### å¿…å¡«å‚æ•°
- **AI æä¾›å•†**: é€‰æ‹© Geminiã€OpenAI æˆ– Claude â­ **v2.0æ–°å¢**
- **æµ‹è¯•ç«™ç‚¹URL**: API çš„åŸºç¡€ URL
- **æ¨¡å‹åç§°**: å¯¹åº”æä¾›å•†çš„æ¨¡å‹åç§°
- **APIå¯†é’¥**: å¯¹åº”æä¾›å•†çš„ API å¯†é’¥

#### ç¤ºä¾‹é…ç½®

**Gemini:**
```
URL: https://generativelanguage.googleapis.com
æ¨¡å‹: gemini-1.5-flash
æä¾›å•†: Gemini
```

**OpenAI:** â­ **v2.0æ–°å¢**
```
URL: https://api.openai.com
æ¨¡å‹: gpt-4
æä¾›å•†: OpenAI
```

**Claude:** â­ **v2.0æ–°å¢**
```
URL: https://api.anthropic.com
æ¨¡å‹: claude-3-opus-20240229
æä¾›å•†: Claude
```

#### é€‰æ‹©æµ‹è¯•è¯­å¥æ¨¡å¼ï¼ˆæ–°åŠŸèƒ½ï¼ï¼‰

**ğŸ“ å›ºå®šè¯­å¥æ¨¡å¼**:
- æ¯æ¬¡è¯·æ±‚ä½¿ç”¨ç›¸åŒçš„æµ‹è¯•è¯­å¥
- æ”¯æŒè¶…å¤§æ–‡æœ¬è¾“å…¥ï¼ˆæœ€å¤š200,000å­—ç¬¦ï¼‰
- é€‚åˆæµ‹è¯•é•¿ä¸Šä¸‹æ–‡å¤„ç†èƒ½åŠ›
- è¾“å…¥æ¡†å¸¦å®æ—¶å­—ç¬¦è®¡æ•°

**ğŸ² éšæœºè¯­å¥æ¨¡å¼**:
- é¿å…APIé£æ§æ£€æµ‹
- å¯æ·»åŠ å¤šæ¡åŸºç¡€æµ‹è¯•è¯­å¥
- ç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨åŸºç¡€è¯­å¥ä¸Šè¿›è¡Œéšæœºå˜åŒ–
- æ¯æ¬¡è¯·æ±‚ä½¿ç”¨ä¸åŒçš„è¯­å¥å˜ä½“

#### é€‰æ‹©æµ‹å‹æ¨¡å¼

**å›ºå®šæµ‹å‹æ¨¡å¼**:
- è®¾å®šä¸€ä¸ªå›ºå®šçš„RPMå€¼
- ç³»ç»Ÿä¼šæŒç»­ä»¥è¯¥RPMè¿›è¡Œæµ‹è¯•
- é€‚åˆæµ‹è¯•ç‰¹å®šè´Ÿè½½ä¸‹çš„ç¨³å®šæ€§

**è‡ªåŠ¨æµ‹å‹æ¨¡å¼**:
- è®¾å®šèµ·å§‹RPMï¼ˆé»˜è®¤10ï¼‰
- ç³»ç»Ÿæ¯åˆ†é’Ÿè‡ªåŠ¨å¢åŠ 10 RPM
- æŒç»­å¢åŠ ç›´åˆ°è¾¾åˆ°æ‰¿å—æé™
- è‡ªåŠ¨åœæ­¢å¹¶æŠ¥å‘Šæœ€å¤§æ‰¿å—RPM

### 3. å¼€å§‹æµ‹è¯•

ç‚¹å‡»"ğŸš€ å¼€å§‹æµ‹å‹"æŒ‰é’®å¯åŠ¨æµ‹è¯•

**é‡è¦ç‰¹æ€§**:
- âœ… é…ç½®ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œä¸‹æ¬¡ä½¿ç”¨æ— éœ€é‡æ–°è¾“å…¥
- âœ… æµ‹è¯•åœ¨æœåŠ¡å™¨åå°è¿è¡Œï¼Œå…³é—­æµè§ˆå™¨ä¸å½±å“æµ‹è¯•
- âœ… å¯ä»¥éšæ—¶å…³é—­é¡µé¢ï¼Œç¨åå›æ¥æŸ¥çœ‹è¿›åº¦

### 4. ç›‘æ§æ•°æ®

å®æ—¶æŸ¥çœ‹:
- å½“å‰RPMå’Œè¿è¡ŒçŠ¶æ€
- æ€»è¯·æ±‚æ•°ç»Ÿè®¡
- æ€»ä½“æˆåŠŸç‡/å¤±è´¥ç‡
- æœ¬åˆ†é’Ÿå®æ—¶æˆåŠŸç‡/å¤±è´¥ç‡
- å¹³å‡å“åº”æ—¶é—´
- å®Œæ•´çš„å†å²è¶‹åŠ¿æ›²çº¿å›¾ï¼ˆä¿ç•™å…¨éƒ¨æµ‹è¯•æ•°æ®ï¼‰
- è¯¦ç»†çš„è¯·æ±‚æ—¥å¿—ï¼ˆæ¯ä¸ªè¯·æ±‚çš„çŠ¶æ€å’Œè€—æ—¶ï¼‰
- é”™è¯¯åˆ†ç±»ç»Ÿè®¡
- æœ€è¿‘é”™è¯¯æ—¥å¿—

### 5. å…³é—­é¡µé¢åé‡æ–°æ‰“å¼€

å½“ä½ é‡æ–°æ‰“å¼€é¡µé¢æ—¶ï¼š
- âœ… è‡ªåŠ¨åŠ è½½ä¹‹å‰ä¿å­˜çš„é…ç½®
- âœ… è‡ªåŠ¨è¿æ¥åˆ°åå°è¿è¡Œçš„æµ‹è¯•ä»»åŠ¡
- âœ… ç«‹å³æ˜¾ç¤ºå½“å‰çš„æµ‹è¯•çŠ¶æ€å’Œç»Ÿè®¡æ•°æ®
- âœ… æ˜¾ç¤ºå®Œæ•´çš„å†å²æ›²çº¿å›¾

### 6. åœæ­¢æµ‹è¯•

- æ‰‹åŠ¨ç‚¹å‡»"â¹ åœæ­¢æµ‹è¯•"æŒ‰é’®
- æˆ–ç­‰å¾…è‡ªåŠ¨æµ‹å‹è¾¾åˆ°æé™è‡ªåŠ¨åœæ­¢
- æˆ–ç­‰å¾…å›ºå®šæ¨¡å¼è®¾å®šçš„æµ‹è¯•æ—¶é•¿ç»“æŸè‡ªåŠ¨åœæ­¢

### 7. æŸ¥çœ‹å†å²è®°å½•

ç‚¹å‡»"ğŸ“Š å†å²è®°å½•"æŒ‰é’®è¿›å…¥å†å²è®°å½•é¡µé¢ï¼š
- âœ… æŸ¥çœ‹æ‰€æœ‰å†å²æµ‹è¯•è®°å½•åˆ—è¡¨
- âœ… æ˜¾ç¤ºæ¯æ¡è®°å½•çš„å…³é”®ä¿¡æ¯ï¼ˆæ—¶é—´ã€URLã€æ¨¡å‹ã€RPMã€æˆåŠŸç‡ç­‰ï¼‰
- âœ… ç‚¹å‡»ä»»æ„è®°å½•æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
- âœ… æŸ¥çœ‹å®Œæ•´çš„æµ‹è¯•æ•°æ®å’Œè¶‹åŠ¿æ›²çº¿å›¾
- âœ… åˆ é™¤å•æ¡è®°å½•æˆ–æ¸…ç©ºæ‰€æœ‰è®°å½•
- âœ… æ”¯æŒåˆ†é¡µæµè§ˆ

## ğŸ“Š é…ç½®è¯´æ˜

### æœåŠ¡å™¨é…ç½® (`.env`)

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| AUTH_SECRET | ç™»å½•å¯†é’¥ | your_secure_password_here |
| PORT | æœåŠ¡å™¨ç«¯å£ | 8998 |
| DEFAULT_SUCCESS_THRESHOLD | æˆåŠŸç‡é˜ˆå€¼(%) | 80 |
| DEFAULT_MAX_FAILURES | æœ€å¤§è¿ç»­å¤±è´¥æ¬¡æ•° | 10 |
| DEFAULT_RESPONSE_TIME_THRESHOLD | å“åº”æ—¶é—´é˜ˆå€¼(ms) | 150000 |

### è‡ªåŠ¨æ¨¡å¼é…ç½® (`config.js`)

```javascript
autoMode: {
  initialRPM: 10,           // èµ·å§‹RPM
  incrementRPM: 10,         // æ¯æ¬¡å¢åŠ çš„RPM
  incrementInterval: 60000, // å¢é•¿é—´éš”ï¼ˆæ¯«ç§’ï¼‰
  maxRPM: 1000             // æœ€å¤§RPMé™åˆ¶
}
```

## ğŸ”§ æŠ€æœ¯æ¶æ„ï¼ˆv2.0ï¼‰

### åç«¯æŠ€æœ¯æ ˆ
- **Node.js**: è¿è¡Œç¯å¢ƒ
- **Express**: Webæ¡†æ¶
- **WebSocket (ws)**: å®æ—¶é€šä¿¡
- **Axios**: HTTPå®¢æˆ·ç«¯
- **Winston**: ä¸“ä¸šæ—¥å¿—ç³»ç»Ÿ â­ **v2.0æ–°å¢**
- **Swagger**: APIæ–‡æ¡£ç”Ÿæˆ â­ **v2.0æ–°å¢**
- **dotenv**: ç¯å¢ƒå˜é‡ç®¡ç†
- **better-sqlite3**: SQLiteæ•°æ®åº“ï¼ˆå†å²è®°å½•å­˜å‚¨ï¼‰

### æ¶æ„è®¾è®¡ï¼ˆv2.0ï¼‰â­
```
åˆ†å±‚æ¶æ„ (MVC)
â”œâ”€â”€ Presentation Layer (è¡¨ç°å±‚)
â”‚   â”œâ”€â”€ Routes (è·¯ç”±)
â”‚   â””â”€â”€ Middlewares (ä¸­é—´ä»¶)
â”œâ”€â”€ Business Layer (ä¸šåŠ¡å±‚)
â”‚   â”œâ”€â”€ Controllers (æ§åˆ¶å™¨)
â”‚   â””â”€â”€ Services (æœåŠ¡)
â”œâ”€â”€ Data Layer (æ•°æ®å±‚)
â”‚   â””â”€â”€ Database (æ•°æ®åº“)
â””â”€â”€ Infrastructure Layer (åŸºç¡€è®¾æ–½å±‚)
    â”œâ”€â”€ Config (é…ç½®)
    â”œâ”€â”€ Utils (å·¥å…·)
    â””â”€â”€ Logger (æ—¥å¿—)
```

### å‰ç«¯æŠ€æœ¯æ ˆ
- **åŸç”ŸHTML5/CSS3**: ç•Œé¢æ„å»º
- **åŸç”ŸJavaScript**: äº¤äº’é€»è¾‘
- **WebSocket API**: å®æ—¶æ•°æ®æ¥æ”¶
- **Fetch API**: HTTPè¯·æ±‚
- **Chart.js**: æ•°æ®å¯è§†åŒ–

### é¡¹ç›®ç»“æ„ï¼ˆv2.0ï¼‰
```
autoCeya/
â”œâ”€â”€ src/ â­ **v2.0æ–°å¢æ¨¡å—åŒ–ç›®å½•**
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ index.js          # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ controllers/           # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ authController.js
â”‚   â”‚   â”œâ”€â”€ testController.js
â”‚   â”‚   â””â”€â”€ historyController.js
â”‚   â”œâ”€â”€ services/              # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ aiService.js       # AIæœåŠ¡ï¼ˆå¤šæ¨¡å‹æ”¯æŒï¼‰
â”‚   â”‚   â””â”€â”€ stressTestService.js # æµ‹å‹æœåŠ¡
â”‚   â”œâ”€â”€ routes/                # è·¯ç”±å±‚
â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”œâ”€â”€ test.js
â”‚   â”‚   â”œâ”€â”€ history.js
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”œâ”€â”€ middlewares/           # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ auth.js            # è®¤è¯
â”‚   â”‚   â”œâ”€â”€ cors.js            # CORS
â”‚   â”‚   â”œâ”€â”€ errorHandler.js    # é”™è¯¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ rateLimiter.js     # é¢‘ç‡é™åˆ¶
â”‚   â”‚   â””â”€â”€ validator.js       # å‚æ•°éªŒè¯
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·ç±»
â”‚   â”‚   â””â”€â”€ logger.js          # æ—¥å¿—å·¥å…·
â”‚   â””â”€â”€ swagger.js             # Swaggeré…ç½®
â”œâ”€â”€ server-new.js â­ **v2.0ä¸»æœåŠ¡å™¨**
â”œâ”€â”€ server.js                  # v1.xæœåŠ¡å™¨ï¼ˆå…¼å®¹ï¼‰
â”œâ”€â”€ config.js                  # v1.xé…ç½®ï¼ˆå…¼å®¹ï¼‰
â”œâ”€â”€ database.js                # æ•°æ®åº“ç®¡ç†æ¨¡å—
â”œâ”€â”€ package.json               # ä¾èµ–ç®¡ç†
â”œâ”€â”€ .env.example â­ **v2.0æ–°å¢**
â”œâ”€â”€ Dockerfile                 # Dockeré…ç½®ï¼ˆå·²ä¼˜åŒ–ï¼‰
â”œâ”€â”€ docker-compose.yml         # Docker Composeé…ç½®
â”œâ”€â”€ MIGRATION.md â­ **v2.0è¿ç§»æŒ‡å—**
â”œâ”€â”€ README-v2.md â­ **v2.0è¯¦ç»†æ–‡æ¡£**
â”œâ”€â”€ CHANGELOG.md               # æ›´æ–°æ—¥å¿—
â”œâ”€â”€ data/                      # SQLiteæ•°æ®åº“ç›®å½•
â”œâ”€â”€ logs/ â­ **v2.0æ—¥å¿—ç›®å½•**
â””â”€â”€ public/                    # å‰ç«¯é™æ€æ–‡ä»¶
    â”œâ”€â”€ login.html             # ç™»å½•é¡µé¢
    â”œâ”€â”€ dashboard.html         # æ§åˆ¶é¢æ¿
    â”œâ”€â”€ history.html           # å†å²è®°å½•åˆ—è¡¨
    â””â”€â”€ detail.html            # å†å²è®°å½•è¯¦æƒ…
```

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°

### v1.x å‡çº§åˆ° v2.0

è¯¦ç»†è¿ç§»æŒ‡å—è¯·æŸ¥çœ‹ [MIGRATION.md](./MIGRATION.md)

### æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

```bash
# Docker éƒ¨ç½²
docker-compose pull
docker-compose up -d

# æœ¬åœ°éƒ¨ç½²
git pull origin main
npm install
npm start
```

### ç‰ˆæœ¬æ–‡æ¡£

- ğŸ“‹ [æ›´æ–°æ—¥å¿—](./CHANGELOG.md) - æ¯ä¸ªç‰ˆæœ¬çš„æ›´æ–°å†…å®¹
- ğŸ”„ [è¿ç§»æŒ‡å—](./MIGRATION.md) - v1.x åˆ° v2.0 è¿ç§»æ­¥éª¤
- ğŸ“– [v2.0 æ–‡æ¡£](./README-v2.md) - è¯¦ç»†ä½¿ç”¨æ–‡æ¡£
- ğŸ“¦ [å‘å¸ƒæŒ‡å—](./VERSION_RELEASE.md) - å¼€å‘è€…å‘å¸ƒæ–°ç‰ˆæœ¬

## ğŸ” å®‰å…¨å»ºè®®

1. âœ… **åŠ¡å¿…ä¿®æ”¹é»˜è®¤å¯†é’¥**: åœ¨ `.env` ä¸­è®¾ç½®å¼ºå¯†ç 
2. âœ… **ä¸è¦æäº¤ .env æ–‡ä»¶**: å·²åœ¨ `.gitignore` ä¸­æ’é™¤
3. âœ… **ä½¿ç”¨HTTPS**: ç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®SSLè¯ä¹¦
4. âœ… **é™åˆ¶è®¿é—®IP**: å¯é€šè¿‡é˜²ç«å¢™é™åˆ¶è®¿é—®æ¥æº
5. âœ… **å®šæœŸæ›´æ–°ä¾èµ–**: è¿è¡Œ `npm audit` æ£€æŸ¥å®‰å…¨æ¼æ´
6. âœ… **ä½¿ç”¨å›ºå®šç‰ˆæœ¬**: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ç‰¹å®šç‰ˆæœ¬å·è€Œé`latest`

## ğŸ“ APIæ¥å£è¯´æ˜ï¼ˆv2.0ï¼‰

> ğŸ’¡ **å®Œæ•´ API æ–‡æ¡£**ï¼šè®¿é—® `http://localhost:8998/api-docs` æŸ¥çœ‹ Swagger äº¤äº’å¼æ–‡æ¡£

### POST /api/login
ç™»å½•æ¥å£
```json
Request: { "password": "your_password" }
Response: { "success": true, "token": "xxx" }
```

### POST /api/start â­ **v2.0æ›´æ–°**
å¯åŠ¨æµ‹å‹ï¼ˆæ–°å¢ providerType å‚æ•°ï¼‰
```json
Request: {
  "mode": "fixed|auto",
  "rpm": 60,
  "url": "https://api.example.com",
  "modelName": "gemini-pro",
  "apiKey": "your-api-key",
  "providerType": "gemini|openai|claude",  // â† å¿…å¡«
  "testPrompt": "æµ‹è¯•è¯­å¥"
}
Response: { "success": true, "message": "æµ‹è¯•å·²å¯åŠ¨" }
```

### POST /api/stop
åœæ­¢æµ‹å‹
```json
Response: { "success": true, "message": "æµ‹è¯•å·²åœæ­¢" }
```

### GET /api/status
è·å–å½“å‰çŠ¶æ€
```json
Response: {
  "isRunning": true,
  "mode": "auto",
  "currentRPM": 60,
  "stats": { ... }
}
```

### GET /api/history
è·å–å†å²è®°å½•åˆ—è¡¨
```json
Query: ?page=1&pageSize=20
Response: {
  "list": [...],
  "total": 100,
  "page": 1,
  "pageSize": 20,
  "totalPages": 5
}
```

### GET /api/history/:id
è·å–å•æ¡å†å²è®°å½•è¯¦æƒ…
```json
Response: {
  "id": 1,
  "start_time": "...",
  "end_time": "...",
  "minuteStats": [...],
  "errorSummary": {...},
  ...
}
```

### DELETE /api/history/:id
åˆ é™¤å†å²è®°å½•
```json
Response: { "success": true, "message": "åˆ é™¤æˆåŠŸ" }
```

### POST /api/history/clear
æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•
```json
Response: { "success": true, "message": "æ‰€æœ‰å†å²è®°å½•å·²æ¸…ç©º" }
```

### GET /health â­ **v2.0æ–°å¢**
å¥åº·æ£€æŸ¥
```json
Response: {
  "status": "ok",
  "timestamp": "2025-11-07T...",
  "uptime": 12345.678
}
```

### GET /metrics â­ **v2.0æ–°å¢**
ç³»ç»ŸæŒ‡æ ‡
```json
Response: {
  "isRunning": true,
  "totalRequests": 1000,
  "successRate": "95.5",
  "currentRPM": 60,
  "uptime": 12345.678,
  "memory": {...}
}
```

## ğŸ¨ ç•Œé¢é¢„è§ˆ

- **ç™»å½•é¡µé¢**: ç®€æ´ä¼˜é›…çš„æ¸å˜èƒŒæ™¯ç™»å½•ç•Œé¢
- **æ§åˆ¶å°**: å®æ—¶æ•°æ®å±•ç¤ºï¼Œæ”¯æŒæ·±è‰²/æµ…è‰²ä¸»é¢˜
- **æ•°æ®é¢æ¿**: å¡ç‰‡å¼å¸ƒå±€ï¼Œå…³é”®æŒ‡æ ‡ä¸€ç›®äº†ç„¶
- **é”™è¯¯ç›‘æ§**: è¯¦ç»†çš„é”™è¯¯åˆ†ç±»å’Œæ—¥å¿—è®°å½•
- **å†å²è®°å½•**: ç²¾ç¾çš„åˆ—è¡¨å’Œè¯¦æƒ…å±•ç¤ºï¼Œå®Œæ•´çš„æ•°æ®å¯è§†åŒ–
- **è¶‹åŠ¿å›¾è¡¨**: äº¤äº’å¼Chart.jså›¾è¡¨ï¼Œå®Œæ•´å±•ç¤ºæµ‹è¯•è¿‡ç¨‹

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## âš ï¸ å…è´£å£°æ˜

æœ¬å·¥å…·ä»…ç”¨äºæµ‹è¯•ç›®çš„ï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”ã€‚ä½¿ç”¨æœ¬å·¥å…·è¿›è¡ŒAPIæµ‹è¯•æ—¶ï¼Œè¯·ç¡®ä¿ï¼š
1. ä½ æœ‰æƒé™æµ‹è¯•ç›®æ ‡API
2. éµå®ˆAPIæä¾›å•†çš„æœåŠ¡æ¡æ¬¾
3. ä¸è¦å¯¹ä»–äººçš„æœåŠ¡é€ æˆæŸå®³
4. åˆç†æ§åˆ¶æµ‹è¯•å¼ºåº¦

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤Issueæˆ–è”ç³»ç»´æŠ¤è€…ã€‚

---

**Enjoy Testing! ğŸš€**

